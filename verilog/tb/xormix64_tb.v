// Copyright (c) 2020-2021 Maarten Baert <info@maartenbaert.be>
// Available under the MIT License - see LICENSE.txt for details.

// This file was generated by `generate_verilog.py`.

`timescale 1ns/1ps

module xormix64_tb;
    
    // configuration
    localparam streams = 4;
    localparam results = 100;
    localparam [63 : 0] seed_x =
        64'h91eb2642dd235c45;
    localparam [64 * streams - 1 : 0] seed_y =
        256'h76151b36c1b25d925fe5385d7b0d285ce1fb2a562c946e0ee02c9cdec24e8b50;
    
    // reference result
    localparam [64 * streams * results - 1 : 0] ref_result = {
        256'ha7bf00f6f9adc12dc66d48eff41761e37d628be251c3cc09e6f6885a333b5b8f,
        256'h17f18fd86510d206778558cc14d45019216e5fce864afd1c2c8b2649ec0c458c,
        256'h2aceaf819791d1e4f62180ef5a6863de139d7b8d2f3029cbe926da907978bd8e,
        256'h5bc0281f7dde6a1c91a59bd70540c6ad301d51b5772b48995c4aeb8c0498c258,
        256'h0a43c7da79bc3ff77418d77c2ea8e892a91fa74427d97faf59c1748a3e66039f,
        256'h385a9e423bb14aa2af504220a13bd11808fa09dc98d28411c7413c8ffa284472,
        256'h3e2b6003ebef2d61629ae549670ee8dc0e3e0072cb94301641c9e44ed4cbe89c,
        256'h184cab7e97536f1404edca8324b40fe3854949410ee1b7ebcd9ea0f7aeda0249,
        256'h0516de41035fe8527c28e05f83679946718d2dcf29306bd3997ce1ce2520c3ff,
        256'hbdf779e0754b4407d0ad471bceced20118a29272009511d2b55a8521864bf621,
        256'h51296928f7a432460e08cf4d84fbf9a0688c8d644c7e2c16a53d2fd6de785a5d,
        256'hefec3a09392ae9d836176dd69c48b772ea5c96564c1ffac234b4ff25e4030b4c,
        256'h8f044392f68081c67c1fa83c3a28b2d6c7ed915c5e967a87b0dfcf0acdbd95ac,
        256'h4c9d08256801c6e71f06cbae3466dc7ad4f34869ceeb9188f0f714b487d8ea9e,
        256'h1249d4a4ab7d917939cc513ac23eeaafa944367af3e84ebd19f64a7fbe271712,
        256'h860d28f7c561df7c779d6a01a06ba7df4e16d8e780bad4f9365bd73fb1815c8f,
        256'hf08ddd1805785bd1afb2a69f2e8ab6d0be9a263757cb90d7c5c49aa72162d910,
        256'he24230178a959a94d667931e5a71c7f27d9dcc9d824c0a73600ecdec2cf7a961,
        256'h701202b00b4bde68c990d3dc8437d9eebaf031acdbed2d1eaaa4d1787a07b4f8,
        256'he0cd1785f81d572f0ae0e25631f880460b456c36e50535421b00212af5e2d0e9,
        256'hb61a70b8c9375b90762ce088e8b29f5cef1c8427d13f2780714a58636dc57dde,
        256'hc185553e4a49f6a2d5a73e7cdc2c371622453ed99afab2764c8909349383821a,
        256'h3a9a2dd981106ed2f5b4e500623e31039eaf6c4fc05631a4a81039bc0b408c44,
        256'h7a115b8cf3e5842d9f06febf70bd4a52d318299c094c78d9f79d4396e94f5273,
        256'hfcb32b226122a356dba4013ab606aca00b48684eaf090f5b9361c3ff7e67345f,
        256'hdfbf313a8fceee0f8b2c07c88f57f18558cb6e00ed2b7a3ec10638b71de74bc6,
        256'hd25c0e8f2542ce5865b180522d47c4ed1a0d5130020d8dbe3a03526f1b88417e,
        256'h7b9dca2552cfd833df54cd6ad62270c9deb5c3bce06933570b9b50e80a0fe52e,
        256'ha188960073877828f773484cca7d54957b51fc65ad596d6d28c19c5662bc7b20,
        256'ha25648287b8763f81aa3827d9c919e26977eb455a7913bb58eb820b80ff05ba2,
        256'hb615c0794950a72e840cf81558167d25353ef9fce93de1c80b85cebe4d3a58d7,
        256'h8167831c18d6af62bfde7e51a6288fa3c22b008c8931ae714d1f6f0b004d5816,
        256'hd04837dc8a450801c9f914b882ffa1a26a767580334186015c9e9dfeac16f2fc,
        256'h4276e9e77d3100763fbdedf02ca3f5721f5ff9b0bf1ae1a25eb07630e595f190,
        256'ha1af6f5c587e925651b27cbb13d180f8512bf39e581e6a75263d7ec5517387b3,
        256'h71108c5de0acd8eb486aa176f5fec2ed97f92c68456e8b8677ee2facc69ee353,
        256'ha56bae3d10d28f141c82f077d079025f1033e9c3c6ed2ddc3721a3e28c2942f0,
        256'hcc837a059dc5580d85399a6852d1d81acaa084e9dad3937092b86bb29ae36191,
        256'h355ec97d23b950b4102ed45ea570ef183846e178bba904c3831a0e9f632e2cbe,
        256'hd8a76d7b5289e2fde212260f906f5016fc62dae0cbdfc57d3bec639ab9ff6776,
        256'h297ab38f853c66ef4034548e8e8160ea3ff4e072e7d355262e045df373327f77,
        256'h025dd7517a263bd013bd1f93c49672fdffcd7c8cfd41f25d1052f81bc7e522cd,
        256'h58c00b84f2d3f2c7158850d5ee37dad9916f6f2ad76fb1724615dc6956c12f75,
        256'hca2c1445a5607031f580b98489686e39cd75a6040e31de0ceb5a0e4a1786cd56,
        256'h2aaa5ce2c267cf68359881051b75c9aa6c6d19ad53edb717764f74606c255f80,
        256'h21ffbfd43fe8a2280cc1d0071ab30b8ecfb095f359f311f8bb06506703b50f8d,
        256'ha82cacdc615e4a25314cbf6e9a2f8acf72ad625fa41c0a58db260ff6e597c7c2,
        256'h9c3cec124a9f9c897deed018ed2ddd5f804703e5469adf0a86fee8da50ce0cb0,
        256'h31cb7c468e87622ebe2fa02f2e3dca4551d8c1e3a88a43d215aa5cf250a70973,
        256'h0006d46ab226551bebe8e7f941f04ffdcd8da5e6e22baaa139cc34c0c848784a,
        256'h180b265ca771312fcaa1d9a0874e4088b4b41d8b77e2b4bef7433bf38a296881,
        256'h9db473818e532c96e57b9ed218ce60e53ac329951e9fbdf619e5f9dc91aced35,
        256'hf84fc5b60f2c179bd5554c9ec18963bf25d6c4d2a28d3cb4a36cbcaa25f38c7d,
        256'h4569d7510eb1ad6de9ccb0baac8bd00f1dea973fcf9330becd48863bdc71394d,
        256'h7b2f30afe127c87ca02dac17e454da97c0ac6eec6d6e9e7fb98a63be99fc78ba,
        256'hd1227c2245bd1429f57d30aad101518cf25503305a4e56263fc1a6fe13ccb671,
        256'h3055f1c6e840a9551bedfefd806e10e8d28ef2ed193c6b5cbfd5e6889458b3d7,
        256'hbf7246687705331abde78f1ce7bd951139a77e12e4ae1e4250922f6fd49edd9d,
        256'h43c5c4784733404e254254346001fd3e3e22c39238bae921084ae7de8b3e098b,
        256'h4900b8c2865bdd04e0811d406e7fc165e95007c1d95030a0f26b58863d99def8,
        256'h7283db0d78271de223b51385feeffe3e38dbfdb1aeb56fb5cdb3a81b63c6f07e,
        256'haf214c4f328d6f88e59652fbdf2ffdb528029276b68a47417a5abbfb8aa06a47,
        256'h31ac7d0b34dfd57dd185135beea5ee402e64c7769036cb0c11ac519d95e11733,
        256'h2ba2789a4b2a38448aafbb06209c2a3d11457a21df70c61864edadb1622e0a94,
        256'hb1a316a9ffb4cdf910ddb43bbc5fc81e2ca5cb4f4e27d9373aed568e12b533ad,
        256'h0d9a9c48807d8ff92af5da4fe79d0be436040fb7400a6eaf6fa348f0e09c1896,
        256'ha252a1dda920bf7b1c1fe8ec667ef1a9305af40166ce1742bf3768ec2d35c678,
        256'hed251255118a5818199b5f792d72949a9d53ea2a83fa1702de5c845fbbfbc058,
        256'haa78db26ca40a791ca3c38e766c3880cc94e193d55a85d7f931e21cc93520afc,
        256'h1aeb14fd09cc3d34f04a3f93ffd18c279325e5a2fce2b1fdecdd7e62854fcbfa,
        256'hc11e8b85c71ffe3adae07d37b558551b00907d47beb20c4ea8ebbcd04497f895,
        256'hb466c09214d2c9e4694ac6acaf6ebbdf6dce7e13f108eac7d3f9c789d7d9eddc,
        256'hc8d6f9f5c9a81b78506cbbcf3c19d6a37f573f51d58d8529c95ee05e80226cf9,
        256'h555a699b92879f8bc406eae187b699c3383e4e82a2c07af389932d7fb704677e,
        256'h5631f8d399539a8b439ef22ec752eb5a97e7e4fabd6bb5cf35b0aa91429a52c4,
        256'h35a387f59579c6b2c213122d347e659ffffa718473b3a59603cf1d16717042dd,
        256'hd0ce4dc9e72906b10abefa780662fab8c1125261e27deb63c7f8f38337207789,
        256'h4a4f7b0e0b0ce719c217bcdae631632bcd5b4b9f2c17260e4f1260f13f956062,
        256'h3a62cae79acec5baa00b75b3d17fc9fc4f172dfc8f7c5863ac9c6c9208ab201f,
        256'h15bfc1306e27ee67f17b03678e36f94789958dbf6a1db6bcfe67ce1b8ad90b78,
        256'hba51038cb379f0baf9ca027fdd5034d9bada49e9734a1d44a8d31ef30a83edb5,
        256'h8bd0e3c9028dcdb4561509e5e638b0088e0ff35d8a15fd8a656a280e2ad9c28a,
        256'h76b1c781dd0a478c5e41cd68f36191d877035936dc991c0b5235437eda582c2e,
        256'h5096d2d3f1b58595c79195735159a4c56b3e5640e4cc271418eb74bbb1707d7d,
        256'h8ad8fc04836569bbc609794252510141910ba5722d652ff20b560c85c106b3d6,
        256'hf2e10508b6d6e76c016738f13946625e9b535296b3b4aacef222f6dd2544e2a5,
        256'h5d121a87368972d83875e2155458e865624039b20fae68bedbe5bd65b778a20d,
        256'hb4a36ad4767a12c6a36f3537d45fbb8fc45cb218e844634d93b8e384fecd94b3,
        256'h672373ed2732243dc17b8a04f1d03ddc04a6ab4bbbb617bbaefdf39e2e466d87,
        256'ha5e1ea51a4b13c0e505a2c632743dfd27c1ed927ffe178f0b9318c38429d487c,
        256'h7a042b24f88938d4d93d76a2759fabb3a7f9ccf0b5200604c22c4bca13814ead,
        256'h6735ec77334bc875a4a13d92bf3980fb4f14e327778eccc7dbbfe13a732b3d73,
        256'he221612e6e4fdd3f83f0889683058ab3c70277424f2eade0fe4d51090856c8b1,
        256'h8ded46bf87534668ca4cb105b80e9510a855aecd68d7ec1c837e4a4692421f67,
        256'h735b5be061251bb522dd740016f14d48e54b09d51de905f98cfb9970a7a6f722,
        256'h6a8013034a05b300a784049a08cc961d3df5f77441b8700b54df02ce2b3d7078,
        256'h0e31a6f7032be176adec5e88b806466224beb22f63007c7e2b83fe52a1ad7aa8,
        256'h8cdfe196b76bcf357983acd3dccf9ae48d9dc35b7e36e4ffa94e9c3c76a529ca,
        256'h06059f171acf0136b7dd4058c006162e232ff81497a486174d50dcc76171dd41,
        256'h76151b36c1b25d925fe5385d7b0d285ce1fb2a562c946e0ee02c9cdec24e8b50
    };
    
    // DUT signals
    reg clk = 0;
    reg rst;
    reg enable;
    wire [64 * streams - 1 : 0] result;
    
    // flag to stop simulation
    integer run = 1;
    
    // error counter
    integer errors = 0;
    
    // DUT
    xormix64 #(
        .streams(streams)
    ) inst_xormix (
        .clk(clk),
        .rst(rst),
        .seed_x(seed_x),
        .seed_y(seed_y),
        .enable(enable),
        .result(result)
    );
    
    // clock process
    initial begin
        while (run == 1) begin
            clk = 1'b1;
            #5;
            clk = 1'b0;
            #5;
        end
    end
    
    integer i;
    
    // input/output process
    initial begin
        @(posedge clk);
        rst <= 1'b1;
        enable <= 1'b0;
        @(posedge clk);
        rst <= 1'b0;
        enable <= 1'b1;
        for (i = 0; i < results; i = i + 1) begin
            @(posedge clk);
            if (result !== ref_result[64 * streams * i +: 64 * streams]) begin
                $display("Incorrect result for i=%d", i);
                errors = errors + 1;
            end
        end
        $display("Test complete, number of errors: %d", errors);
        run <= 0;
    end
    
endmodule

